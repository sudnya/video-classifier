{
    "name" : "imperative-speech-$tag",

    "optimization" :
    {
        "type" : "NesterovAcceleratedGradientSolver",

        "batch-size"      : "64",
        "maximum-samples" : "1e9",

        "epochs" : "20",

        "parameters" :
        {
            "NesterovAcceleratedGradient::LearningRate"       : "8.0e-4",
            "NesterovAcceleratedGradient::Momentum"           : "0.99",
            "NesterovAcceleratedGradient::AnnealingRate"      : "1.000001",
            "NesterovAcceleratedGradient::MaxGradNorm"        : "100.0",
            "NesterovAcceleratedGradient::IterationsPerBatch" : "1"
        }
    },

    "model" :
    {
        "engine" : "SupervisedLearnerEngine",

        "layer-types" :
        {
            "recurrent" :
            {
                "type" : "RecurrentLayer",
                "size" : "128"
            },
            "input-convolution":
            {
                "type"              : "AudioConvolutionalLayer",
                "filter-samples"    : "160",
                "filter-timesteps"  : "3",
                "filter-outputs"    : "128",
                "padding-samples"   : "0",
                "padding-timesteps" : "1"

            },
            "batch-norm" :
            {
                "type" : "BatchNormalizationLayer"
            }
        },

        "networks" :
        {
            "Classifier" :
            {
                "layers" :
                [
                    "input-convolution",
                    "batch-norm",
                    "recurrent",
                    "batch-norm",
                    "recurrent",
                    "batch-norm",
                    "recurrent",
                    "batch-norm",
                    "recurrent"
                ]
            }
        },

        "cost-function" :
        {
            "name" : "Softmax"
        },

        "model-attributes" :
        {
            "SamplingRate"  : "8000",
            "FrameDuration" : "160"
        }
    },

    "attributes" :
    {
        "InputAudioDataProducer::NoiseRateLower" : "0.0",
        "InputAudioDataProducer::NoiseRateUpper" : "0.1",
        "InputAudioDataProducer::TotalTimestepsPerUtterance" : "512"
    },

    "dataset" :
    {
        "training-dataset-path"   : "/data/1tb-ssd/imperative-speech/train/database.txt",
        "validation-dataset-path" : "/data/1tb-ssd/imperative-speech/test/database.txt",

        "required-accuracy" : "99.0"
    },

    "checkpointing" :
    {
        "base-directory" : "$name"
    },

    "logging" :
    {
        "enabled-loggers" :
        [
            "NesterovAcceleratedGradientSolver",
            "BenchmarkDataset",
            "LabelMatchResultProcessor",
            "InputAudioDataProducer"
        ]
    },

    "system" :
    {
        "use-cuda"    : "1",
        "cuda-device" : "0",
        "precision"   : "SinglePrecision"
    }

}

